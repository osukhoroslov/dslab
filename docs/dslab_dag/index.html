<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="DSLab DAG"><title>dslab_dag - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-081576b923113409.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="dslab_dag" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0 (129f3b996 2024-06-10)" data-channel="1.79.0" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-e32f0c247825364d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../dslab_dag/index.html">dslab_dag</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../dslab_dag/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">dslab_dag</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/dslab_dag/lib.rs.html#1-18">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="dslab-dag"><a class="doc-anchor" href="#dslab-dag">§</a>DSLab DAG</h2>
<p>A library for studying the scheduling of computations represented as directed acyclic graphs (DAG), such as scientific workflows or data-parallel jobs, in distributed systems. It allows to describe a computational DAG and simulate its execution in a given distributed system using the specified scheduling algorithm (including the user-defined one).</p>
<p>The distributed system is modeled as a set of computing <a href="https://github.com/osukhoroslov/dslab/tree/main/crates/dslab-dag/src/resource.rs">resources</a> connected with network. Each resource is described by the number of CPU cores, their speed in flop/s and amount of memory. Resources can execute compute <a href="https://github.com/osukhoroslov/dslab/tree/main/crates/dslab-dag/src/task.rs">tasks</a> described by the amount of computations in flops, the minimum and maximum number of used cores, and the amount of used memory. Each task also has a function which defines the dependence of parallel speedup on the number of used cores. Currently, the allocation of cores for each task is computed upon the task arrival and is not changed during the task execution. The resource implementation is based on the <a href="https://github.com/osukhoroslov/dslab/tree/main/crates/dslab-compute/src/multicore.rs">multicore</a> compute model from the <a href="https://github.com/osukhoroslov/dslab/tree/main/crates/dslab-compute">dslab-compute</a> crate. The network model is provided by the <a href="https://github.com/osukhoroslov/dslab/tree/main/crates/dslab-network">dslab-network</a> crate.</p>
<p>The computational <a href="https://github.com/osukhoroslov/dslab/blob/main/crates/dslab-dag/src/dag.rs">DAG</a> is modeled as a set of tasks with data dependencies. Each <a href="https://github.com/osukhoroslov/dslab/tree/main/crates/dslab-dag/src/task.rs">task</a> can produce one or more data items (task outputs) and consume (as task inputs) data items produced by other tasks. Entry tasks consume separate data items corresponding to the DAG inputs. The data dependencies between the tasks define constraints on task execution - a task cannot start its execution on some resource until all its inputs are produced (parent tasks are completed) and transferred to this resource.</p>
<p>The scheduling of DAG tasks, i.e. assigning tasks to resources and defining the order of task execution on each resource, is performed by the implementation of <a href="https://github.com/osukhoroslov/dslab/blob/main/crates/dslab-dag/src/scheduler.rs">Scheduler</a> trait. This trait includes two callback methods which are called at the start of DAG execution and on every task state change respectively. Each method can return one or multiple actions corresponding to decisions made by the scheduler (assign task to resource, transfer data item between resources, etc). This approach allows to implement and test arbitrary static or dynamic scheduling algorithms. The library includes several ready-to-use implementations in the <a href="https://github.com/osukhoroslov/dslab/tree/main/crates/dslab-dag/src/schedulers">schedulers</a> folder.</p>
<p><a href="https://github.com/osukhoroslov/dslab/blob/main/crates/dslab-dag/src/dag_simulation.rs">DagSimulation</a> provides a convenient API for configuring and running simulations. Here is a small example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;
<span class="kw">use </span>std::cell::RefCell;

<span class="kw">use </span>dslab_dag::dag::DAG;
<span class="kw">use </span>dslab_dag::dag_simulation::DagSimulation;
<span class="kw">use </span>dslab_dag::data_item::DataTransferMode;
<span class="kw">use </span>dslab_dag::network::read_network_config;
<span class="kw">use </span>dslab_dag::parsers::config::ParserConfig;
<span class="kw">use </span>dslab_dag::resource::read_resource_configs;
<span class="kw">use </span>dslab_dag::runner::Config;
<span class="kw">use </span>dslab_dag::schedulers::simple_scheduler::SimpleScheduler;

<span class="comment">// load resources and network configuration
</span><span class="kw">let </span>resources = read_resource_configs(<span class="string">"../../examples/dag-demo/systems/cluster-het-4-32cores.yaml"</span>);
<span class="kw">let </span>network = read_network_config(<span class="string">"../../examples/dag-demo/systems/cluster-het-4-32cores.yaml"</span>);
<span class="comment">// use simple scheduler implementation
</span><span class="kw">let </span>scheduler = Rc::new(RefCell::new(SimpleScheduler::new()));
<span class="comment">// create simulation with random seed 123
</span><span class="kw">let </span><span class="kw-2">mut </span>sim = DagSimulation::new(<span class="number">123</span>, resources, network, scheduler, Config { data_transfer_mode: DataTransferMode::Direct });
<span class="comment">// read DAG from YAML file
</span><span class="kw">let </span>dag = DAG::from_yaml(<span class="string">"../../examples/dag-demo/dags/diamond.yaml"</span>, <span class="kw-2">&amp;</span>ParserConfig::default());

<span class="comment">// init simulation
</span><span class="kw">let </span>runner = sim.init(dag);
<span class="comment">// run simulation until completion
</span>sim.step_until_no_events();
<span class="comment">// check that all tasks in DAG are completed
</span>runner.borrow().validate_completed();</code></pre></div>
<p>More examples can be found <a href="https://github.com/osukhoroslov/dslab/tree/main/examples">here</a> in folders with “dag” prefix. </p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="dag/index.html" title="mod dslab_dag::dag">dag</a></div><div class="desc docblock-short">DAG model of computation.</div></li><li><div class="item-name"><a class="mod" href="dag_simulation/index.html" title="mod dslab_dag::dag_simulation">dag_simulation</a></div><div class="desc docblock-short">Simulation configuration and execution.</div></li><li><div class="item-name"><a class="mod" href="dag_stats/index.html" title="mod dslab_dag::dag_stats">dag_stats</a></div></li><li><div class="item-name"><a class="mod" href="data_item/index.html" title="mod dslab_dag::data_item">data_item</a></div><div class="desc docblock-short">Data item.</div></li><li><div class="item-name"><a class="mod" href="experiment/index.html" title="mod dslab_dag::experiment">experiment</a></div><div class="desc docblock-short">Tool for running experiments across many (dag, system. scheduler) combinations.</div></li><li><div class="item-name"><a class="mod" href="lower_bound/index.html" title="mod dslab_dag::lower_bound">lower_bound</a></div></li><li><div class="item-name"><a class="mod" href="network/index.html" title="mod dslab_dag::network">network</a></div><div class="desc docblock-short">Network model tools.</div></li><li><div class="item-name"><a class="mod" href="parsers/index.html" title="mod dslab_dag::parsers">parsers</a></div><div class="desc docblock-short">Tools for loading DAG from different file formats.</div></li><li><div class="item-name"><a class="mod" href="resource/index.html" title="mod dslab_dag::resource">resource</a></div><div class="desc docblock-short">Resource model.</div></li><li><div class="item-name"><a class="mod" href="run_stats/index.html" title="mod dslab_dag::run_stats">run_stats</a></div></li><li><div class="item-name"><a class="mod" href="runner/index.html" title="mod dslab_dag::runner">runner</a></div><div class="desc docblock-short">DAG execution runtime.</div></li><li><div class="item-name"><a class="mod" href="scheduler/index.html" title="mod dslab_dag::scheduler">scheduler</a></div><div class="desc docblock-short">DAG scheduling.</div></li><li><div class="item-name"><a class="mod" href="schedulers/index.html" title="mod dslab_dag::schedulers">schedulers</a></div><div class="desc docblock-short">Scheduler implementations.</div></li><li><div class="item-name"><a class="mod" href="system/index.html" title="mod dslab_dag::system">system</a></div><div class="desc docblock-short">Distributed computing system.</div></li><li><div class="item-name"><a class="mod" href="task/index.html" title="mod dslab_dag::task">task</a></div><div class="desc docblock-short">DAG task.</div></li><li><div class="item-name"><a class="mod" href="trace_log/index.html" title="mod dslab_dag::trace_log">trace_log</a></div><div class="desc docblock-short">DAG execution log.</div></li></ul></section></div></main></body></html>